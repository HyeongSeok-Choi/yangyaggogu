<!DOCTYPE html>
<!--출하지시서 리스트 페이지 -->
<html lang='en' xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layouts/layout1}">
<head>
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <!-- css files for DataTables -->
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://cdn.datatables.net/2.0.8/js/dataTables.js"></script>
    <script src="https://cdn.datatables.net/2.0.8/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/autofill/2.7.0/js/autoFill.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/autofill/2.7.0/js/dataTables.autoFill.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.2/js/buttons.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.2/js/buttons.colVis.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.2/js/buttons.print.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.2/js/buttons.html5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdn.datatables.net/select/2.0.3/js/dataTables.select.js"></script>
    <script src="https://cdn.datatables.net/select/2.0.3/js/select.dataTables.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.2/moment.min.js"></script>

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/2.0.8/css/dataTables.bootstrap5.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/autofill/2.7.0/css/autoFill.bootstrap5.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/3.0.2/css/buttons.bootstrap5.min.css" />
    <style>
        #order_list thead th {
            text-align: center;
        }

        .container1{
            padding-left: 300px;
            padding-top: 50px;
        }
    </style>
</head>

<body>
<th:block layout:fragment="content">
<div class="navbar navbar-vertical navbar-expand-lg" th:replace="~{/fragments/header::header}"></div>
<div class="container1">


    <label>기간
        <input type="date" id="startDate" placeholder="시작날짜">
        ~

        <input type="date" id="endDate" placeholder="종료날짜">
    </label>
    <button id="filterButton" class="btn btn-primary">날짜 설정</button>


    <table id="shipmentRegisterForm" class="table table-striped table-bordered order-detail-table">

        <thead>
        <tr>
            <th></th>
            <th></th>
            <th>출하지시서 번호</th>
            <th>수주번호</th>
            <th>출하일</th>
            <th>제품명</th>
            <th>수량</th>
            <th>작성일</th>
            <th>납품일</th>
            <th>작성 상태</th>

            <!--            <th></th>-->
        </thead>
    </table>

</div>


<script th:inline="javascript">
    var table = null;
    $(document).ready(function () {
        table = $('#shipmentRegisterForm').DataTable({
            responsive: {
                details: {
                    type: 'column',
                    target: -1,
                }
            },
            columnDefs: [
                {
                    orderable: false,
                    render: DataTable.render.select(),
                    targets: 0
                },
                {
                    targets: '_all',
                    className: 'dt-body-center'
                },
                {
                    targets: 0, width: 200
                },
                {
                    targets: 1, width: 100
                },
                {
                    target: 4 ,render: DataTable.render.date()
                },
                {
                    target: 8 ,render: DataTable.render.date()
                },
                {
                    target: 9 ,render: DataTable.render.date()
                }
            ],
            select: {
                style: 'os',
                selector: 'td:first-child',
                headerCheckbox: false
            },
            order: [1, 'asc'],

            ajax: {
                url: 'http://localhost:8080/api/shipment/confirmedList',
                type: 'GET',

            },
            columns: [// dataLoader 이름 + entity이름
                {data: null},
                {data: null, defaultContent: ''},
                {data: "shipment_Number",render: function (data, type, row, meta) {
                        return '<a href="/shipment/confirmedList/' + data + '">' + data + '</a>';
                    }},
                {data: "order_Number",},
                {data: "shippingDate"},
                {data: "productionName"},
                {data: "shipment_Amount"},
                {data: "createdAt"},
                {data: "deliveryDate"},
                {data: "state",
                    render: function (data, type, row) {
                        if (data === "ready") {
                            return "ready";
                        } else if (data === "completed") {
                            return "작성 완료";
                        } else {
                            return data;
                        }
                    }}
            ],
            ordering: true,
            lengthChange: false,
            info: false,
            displayLength: 10,
            rowCallback: function (row, data, index) {
                var pageInfo = table.page.info();
                $('td:eq(1)', row).html(pageInfo.start + index + 1);


            },
            dom: 'Bfrtip',
            buttons: [
                {
                    extend: 'colvis',
                    text: "선택",
                },
                {
                    extend: 'copy',
                    text: "복사",
                },
                {
                    extend: 'excel',
                    text: "엑셀",
                },

            ]
        });





    });

</script>
</th:block>
</body>

</html>
