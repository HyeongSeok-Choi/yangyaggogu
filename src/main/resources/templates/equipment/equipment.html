<!DOCTYPE html>
<html lang='en' xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">
<head>
    <title>설비 현황</title>
    <th:block layout:fragment="css">
        <style>

            .container1{
                max-width: 90%;
                margin: auto;
            }
            .table-hover th, .table-hover td{
                text-align: center;
                vertical-align: middle;
                width: 5%;
            }
        </style>
    </th:block>
</head>
<body>
<th:block layout:fragment="content">
    <div class="container1">
        <h3><strong>설비 현황</strong></h3>
        <br>
        <button type="button" class="btn btn-primary" id="rowStockOrder_input" value="설비 등록">
            설비 등록</button>
        <table id="Table" class="table table-striped table-bordered table-hover" style="text-align: center">

        </table>

        <script th:inline="javascript">
            var table = null;
            $(document).ready(function() {
                table = $('#Table').DataTable({
                    searching: false,
                    responsive: true,
                    destroy: true,
                    processing: true,
                    serverSide: false,
                    ordering: true,
                    scrollX: true,
                    info:false,
                    select: {
                        style: 'multi',
                        selector: 'td:first-child',
                        headerCheckbox: 'select-page'
                    },
                    columnDefs: [
                        {
                            orderable: false,
                            render: DataTable.render.select(),
                            targets: 0
                        }
                    ],
                    layout: {
                        topStart: {
                            buttons: [
                                {
                                    extend: 'colvis',
                                    text: "선택",
                                },
                                {
                                    extend: 'copy',
                                    text: "복사",
                                },
                                {
                                    extend: 'excel',
                                    text: "엑셀",
                                },

                            ]
                        },
                        bottomStart: {
                            paging: {
                                numbers: 3
                            }
                        },
                        bottomEnd: {

                        }
                    },
                    ajax: {
                        url: '/api/equipment',
                        type: 'GET',
                        dataFilter: function(res) {
                            var json = $.parseJSON(res);

                            var data = {
                                'draw': json.data.draw,
                                'recordsTotal': json.data.recordsTotal,
                                'recordsFiltered': json.data.recordsFiltered,
                                'data': json.data,
                            };
                            console.log(data.data);
                            return JSON.stringify(data);
                        }
                    },
                    columns: [
                        {title: ""},
                        {title:"설비코드", data: 'equipmentCode'},
                        {title:"설비명",data: 'equipmentName'},
                        {title:"가동률",data: 'operationRate'},
                        {title:"미가동사유",data: 'reasonNoOp'},
                        {title:"상태",data: 'state'},
                        {title:"설치일",data: 'settingDate'}
                    ]
                })
            });
        </script>

    </div>
</th:block>
</body>
</html>